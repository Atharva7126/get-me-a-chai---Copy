{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/models/Payment.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nconst { Schema,model } = mongoose;\r\n\r\nconst PaymentSchema = new Schema({\r\n    name: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    to_user: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    order_id: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    message: {\r\n        type: String,\r\n    },\r\n    amount: {\r\n        type: Number,\r\n        required: true\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n    },\r\n    updatedAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n    },\r\n    done: {\r\n        type: Boolean,\r\n        default: false\r\n    },\r\n\r\n})\r\n\r\nexport default mongoose.models.Payment || model(\"Payment\", PaymentSchema);  "],"names":[],"mappings":";;;AAAA;;AACA,MAAM,EAAE,MAAM,EAAC,KAAK,EAAE,GAAG,yGAAA,CAAA,UAAQ;AAEjC,MAAM,gBAAgB,IAAI,OAAO;IAC7B,MAAM;QACF,MAAM;QACN,UAAU;IACd;IACA,SAAS;QACL,MAAM;QACN,UAAU;IACd;IACA,UAAU;QACN,MAAM;QACN,UAAU;IACd;IACA,SAAS;QACL,MAAM;IACV;IACA,QAAQ;QACJ,MAAM;QACN,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;IACrB;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;IACrB;IACA,MAAM;QACF,MAAM;QACN,SAAS;IACb;AAEJ;uCAEe,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,MAAM,WAAW","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/db/connectDb.js"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    const conn = await mongoose.connect(`mongodb://localhost:27017/chai`, {\r\n      useNewUrlParser: true,\r\n    });\r\n    console.log(`MongoDB Connected: {conn.connection.host}`);\r\n  } catch (error) {\r\n    console.error(error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nexport default connectDB"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,YAAY;IAChB,IAAI;QACF,MAAM,OAAO,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,CAAC,8BAA8B,CAAC,EAAE;YACpE,iBAAiB;QACnB;QACA,QAAQ,GAAG,CAAC,CAAC,yCAAyC,CAAC;IACzD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,MAAM,OAAO;QAC3B,QAAQ,IAAI,CAAC;IACf;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/models/User.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\nconst { Schema, model } = mongoose;\r\n\r\nconst UserSchema = new Schema({\r\n    email: { type: String, required: true },\r\n    name: { type: String},\r\n    username: { type: String, required: true },\r\n    bio: { type: String, default: \"Hey there!\" },\r\n    profilepic: {type: String},\r\n    coverpic: {type: String},\r\n    razorpayid: { type: String },\r\n    razorpaysecret: { type: String },\r\n    createdAt: { type: Date, default: Date.now },\r\n    updatedAt: { type: Date, default: Date.now },\r\n    });\r\n\r\nexport default mongoose.models.User || model(\"User\", UserSchema);"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,yGAAA,CAAA,UAAQ;AAElC,MAAM,aAAa,IAAI,OAAO;IAC1B,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,MAAM;QAAE,MAAM;IAAM;IACpB,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,KAAK;QAAE,MAAM;QAAQ,SAAS;IAAa;IAC3C,YAAY;QAAC,MAAM;IAAM;IACzB,UAAU;QAAC,MAAM;IAAM;IACvB,YAAY;QAAE,MAAM;IAAO;IAC3B,gBAAgB;QAAE,MAAM;IAAO;IAC/B,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;IAC3C,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC3C;uCAEW,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,MAAM,QAAQ","debugId":null}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/actions/useractions.js"],"sourcesContent":["\"use server\"\r\nimport Razorpay from \"razorpay\"\r\nimport Payment from \"@/models/Payment\"\r\nimport connectDB from \"@/db/connectDb\"\r\nimport User from \"@/models/User\"\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nexport const initiatePayment = async (amount, to_username, paymentform) => {\r\n    await connectDB()\r\n    let user = await User.findOne({username: to_username});\r\n    const razorpaySecret = user?.razorpaysecret;\r\n    const razorpayKey = user?.razorpayid;\r\n\r\n    const instance = new Razorpay({\r\n        key_id: razorpayKey,\r\n        key_secret: razorpaySecret,\r\n    })\r\n\r\n    let options = {\r\n        amount: Number.parseInt(amount),\r\n        currency: \"INR\",\r\n    }\r\n\r\n    let order = await instance.orders.create(options)\r\n    await Payment.create({\r\n        amount: amount / 100,\r\n        order_id: order.id,\r\n        to_user: to_username,\r\n        name: paymentform.name,\r\n        message: paymentform.message,\r\n    })\r\n    return order\r\n}\r\n\r\nexport const fetchuser = async (username) => {\r\n    await connectDB()\r\n    const user = await User.findOne({ username: username }).lean()\r\n    if (!user) return null\r\n    return {\r\n        ...user,\r\n        _id: user._id.toString(),\r\n        createdAt: user.createdAt?.toISOString(),\r\n        updatedAt: user.updatedAt?.toISOString()\r\n    }\r\n}\r\n\r\nexport const fetchPayments = async (username) => {\r\n    await connectDB()\r\n    let payments = await Payment.find({ to_user: username, done: true }).sort({ amount: -1 }).limit(10).lean()\r\n    return payments.map(p => ({\r\n        ...p,\r\n        _id: p._id.toString(),\r\n        createdAt: p.createdAt?.toISOString(),\r\n        updatedAt: p.updatedAt?.toISOString()\r\n    }))\r\n}\r\n\r\nexport const updateProfile = async (oldusername, data) => {\r\n    await connectDB()\r\n    let ndata = data\r\n    // Check if the new username already exists\r\n    if (oldusername !== ndata.username) {\r\n        let u = await User.findOne({ username: ndata.username })\r\n        if (u) {\r\n            throw new Error(\"Username already exists\")\r\n        }\r\n        await User.updateOne({email: ndata.email }, ndata)\r\n        // Now update all the usernames in the Payments nad User collection \r\n        await Payment.updateMany({to_user: oldusername}, {to_user: ndata.username})\r\n        await User.updateMany({username: oldusername}, {username: ndata.username})\r\n    } else {\r\n        await User.updateOne({email: ndata.email }, ndata)\r\n    }\r\n} "],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAEO,MAAM,kBAAkB,OAAO,QAAQ,aAAa;IACvD,MAAM,CAAA,GAAA,+GAAA,CAAA,UAAS,AAAD;IACd,IAAI,OAAO,MAAM,8GAAA,CAAA,UAAI,CAAC,OAAO,CAAC;QAAC,UAAU;IAAW;IACpD,MAAM,iBAAiB,MAAM;IAC7B,MAAM,cAAc,MAAM;IAE1B,MAAM,WAAW,IAAI,4IAAA,CAAA,UAAQ,CAAC;QAC1B,QAAQ;QACR,YAAY;IAChB;IAEA,IAAI,UAAU;QACV,QAAQ,OAAO,QAAQ,CAAC;QACxB,UAAU;IACd;IAEA,IAAI,QAAQ,MAAM,SAAS,MAAM,CAAC,MAAM,CAAC;IACzC,MAAM,iHAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACjB,QAAQ,SAAS;QACjB,UAAU,MAAM,EAAE;QAClB,SAAS;QACT,MAAM,YAAY,IAAI;QACtB,SAAS,YAAY,OAAO;IAChC;IACA,OAAO;AACX;AAEO,MAAM,YAAY,OAAO;IAC5B,MAAM,CAAA,GAAA,+GAAA,CAAA,UAAS,AAAD;IACd,MAAM,OAAO,MAAM,8GAAA,CAAA,UAAI,CAAC,OAAO,CAAC;QAAE,UAAU;IAAS,GAAG,IAAI;IAC5D,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO;QACH,GAAG,IAAI;QACP,KAAK,KAAK,GAAG,CAAC,QAAQ;QACtB,WAAW,KAAK,SAAS,EAAE;QAC3B,WAAW,KAAK,SAAS,EAAE;IAC/B;AACJ;AAEO,MAAM,gBAAgB,OAAO;IAChC,MAAM,CAAA,GAAA,+GAAA,CAAA,UAAS,AAAD;IACd,IAAI,WAAW,MAAM,iHAAA,CAAA,UAAO,CAAC,IAAI,CAAC;QAAE,SAAS;QAAU,MAAM;IAAK,GAAG,IAAI,CAAC;QAAE,QAAQ,CAAC;IAAE,GAAG,KAAK,CAAC,IAAI,IAAI;IACxG,OAAO,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;YACtB,GAAG,CAAC;YACJ,KAAK,EAAE,GAAG,CAAC,QAAQ;YACnB,WAAW,EAAE,SAAS,EAAE;YACxB,WAAW,EAAE,SAAS,EAAE;QAC5B,CAAC;AACL;AAEO,MAAM,gBAAgB,OAAO,aAAa;IAC7C,MAAM,CAAA,GAAA,+GAAA,CAAA,UAAS,AAAD;IACd,IAAI,QAAQ;IACZ,2CAA2C;IAC3C,IAAI,gBAAgB,MAAM,QAAQ,EAAE;QAChC,IAAI,IAAI,MAAM,8GAAA,CAAA,UAAI,CAAC,OAAO,CAAC;YAAE,UAAU,MAAM,QAAQ;QAAC;QACtD,IAAI,GAAG;YACH,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,8GAAA,CAAA,UAAI,CAAC,SAAS,CAAC;YAAC,OAAO,MAAM,KAAK;QAAC,GAAG;QAC5C,oEAAoE;QACpE,MAAM,iHAAA,CAAA,UAAO,CAAC,UAAU,CAAC;YAAC,SAAS;QAAW,GAAG;YAAC,SAAS,MAAM,QAAQ;QAAA;QACzE,MAAM,8GAAA,CAAA,UAAI,CAAC,UAAU,CAAC;YAAC,UAAU;QAAW,GAAG;YAAC,UAAU,MAAM,QAAQ;QAAA;IAC5E,OAAO;QACH,MAAM,8GAAA,CAAA,UAAI,CAAC,SAAS,CAAC;YAAC,OAAO,MAAM,KAAK;QAAC,GAAG;IAChD;AACJ;;;IAlEa;IA2BA;IAYA;IAWA;;AAlDA,+OAAA;AA2BA,+OAAA;AAYA,+OAAA;AAWA,+OAAA","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/.next-internal/server/app/%5Busername%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {initiatePayment as '7faf10af0ae48e4e4376e809ed5446dc9fb925fc55'} from 'ACTIONS_MODULE0'\nexport {fetchPayments as '7f4d36bf608f0e6f876e00c0f07dc056c9c20a8c8c'} from 'ACTIONS_MODULE0'\nexport {fetchuser as '7ff47eda1a80a235f564e61b1281835b5850e91998'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/components/PaymentsPage.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/PaymentsPage.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/PaymentsPage.js <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/components/PaymentsPage.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/PaymentsPage.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/PaymentsPage.js\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,wCACA","debugId":null}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/HTML%2C%20CSS%2C%20JS/Projects/Nextjs%20Project%201%20-%20GetMeAChai/get-me-a-chai/app/%5Busername%5D/page.js"],"sourcesContent":["import PaymentPage from '@/components/PaymentsPage'\r\nimport React from 'react'\r\nimport { notFound } from \"next/navigation\"\r\nimport connectDB from '@/db/connectDb'\r\nimport User from '@/models/User'\r\n\r\nconst Username = async ({ params }) => {\r\n\r\n  const { username } = await params\r\n  // If username is not valid, return 404 page\r\n  const checkUser = async () => {\r\n    await connectDB()\r\n    let u = await User.findOne({ username: username })\r\n    if (!u) {\r\n      notFound()\r\n    }\r\n  }\r\n  await checkUser()\r\n\r\n  return (\r\n    <>\r\n      <PaymentPage username={username} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Username\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AACA;AACA;;;;;;;AAEA,MAAM,WAAW,OAAO,EAAE,MAAM,EAAE;IAEhC,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;IAC3B,4CAA4C;IAC5C,MAAM,YAAY;QAChB,MAAM,CAAA,GAAA,+GAAA,CAAA,UAAS,AAAD;QACd,IAAI,IAAI,MAAM,8GAAA,CAAA,UAAI,CAAC,OAAO,CAAC;YAAE,UAAU;QAAS;QAChD,IAAI,CAAC,GAAG;YACN,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;QACT;IACF;IACA,MAAM;IAEN,qBACE;kBACE,cAAA,8OAAC,0HAAA,CAAA,UAAW;YAAC,UAAU;;;;;;;AAG7B;uCAEe","debugId":null}}]
}